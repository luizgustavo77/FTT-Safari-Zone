{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { useState, useEffect } from 'react';\nimport styles from \"./styles\";\nimport api from \"../../service/api\";\nimport CardPessoa from \"../../componentes/CardPessoa\";\nimport Header from \"../../componentes/Header\";\nimport * as Utils from \"../../utils/utils\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ListaPessoas(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      lista = _useState2[0],\n      setLista = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      load = _useState4[0],\n      setLoad = _useState4[1];\n\n  function carregaLista() {\n    var resposta;\n    return _regeneratorRuntime.async(function carregaLista$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            setLoad(true);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(api.get('/pessoa/filter/getAll'));\n\n          case 4:\n            resposta = _context.sent;\n            Utils.sleep(2000);\n            setLista(resposta.data);\n            setLoad(false);\n            _context.next = 13;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](0);\n            Alert.alert(_context.t0.toString());\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  }\n\n  useEffect(function () {\n    console.log('executando useffect da listagem');\n    carregaLista();\n  }, []);\n\n  function novoRegistro() {\n    navigation.navigate('CadastroPessoa', {\n      inclusao: true\n    });\n  }\n\n  function editaRegistro(pessoa) {\n    navigation.navigate('CadastroPessoa', {\n      pessoa: pessoa,\n      inclusao: false\n    });\n  }\n\n  function removerElemento(id) {\n    Alert.alert('Atenção', 'Confirma a remoção do contato?', [{\n      text: 'Sim',\n      onPress: function onPress() {\n        return efetivaRemocao(id);\n      }\n    }, {\n      text: 'Não',\n      style: 'cancel'\n    }]);\n  }\n\n  function efetivaRemocao(id) {\n    return _regeneratorRuntime.async(function efetivaRemocao$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            try {\n              api.delete('/Pessoa/' + id).then(function () {\n                carregaLista();\n              });\n            } catch (e) {\n              Alert.alert(e.toString());\n            }\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Header, {\n      metodoAdd: novoRegistro,\n      exibeIconeNovoRegistro: true,\n      novoRegistro: true\n    }), _jsx(ScrollView, {\n      style: styles.areaScroolView,\n      children: load ? _jsx(ActivityIndicator, {\n        size: \"large\",\n        color: \"#00ff00\",\n        style: styles.waiting\n      }) : lista.map(function (pessoa, index) {\n        return _jsx(CardPessoa, {\n          pessoa: pessoa,\n          editar: editaRegistro,\n          remover: removerElemento\n        }, index.toString());\n      })\n    })]\n  });\n}","map":{"version":3,"names":["useState","useEffect","styles","api","CardPessoa","Header","Utils","ListaPessoas","navigation","lista","setLista","load","setLoad","carregaLista","get","resposta","sleep","data","Alert","alert","toString","console","log","novoRegistro","navigate","inclusao","editaRegistro","pessoa","removerElemento","id","text","onPress","efetivaRemocao","style","delete","then","e","container","areaScroolView","waiting","map","index"],"sources":["C:/Users/Dell/Downloads/cadpessoasCompleto/cadPessoas_2/telas/pessoa/index.js"],"sourcesContent":["import {\r\n    Alert, View, ScrollView, ActivityIndicator\r\n} from 'react-native';\r\nimport { useState, useEffect } from 'react';\r\nimport styles from './styles';\r\nimport api from '../../service/api';\r\nimport CardPessoa from '../../componentes/CardPessoa';\r\nimport Header from '../../componentes/Header';\r\nimport * as Utils from '../../utils/utils';\r\n\r\nexport default function ListaPessoas({ navigation }) {\r\n\r\n    const [lista, setLista] = useState([]);\r\n    const [load, setLoad] = useState(false);\r\n\r\n    //carregaLista();\r\n\r\n    async function carregaLista() {\r\n        try {\r\n            setLoad(true);\r\n            let resposta = (await api.get('/pessoa/filter/getAll'));\r\n            Utils.sleep(2000); // para dar tempo de ver o efeito de loading...\r\n            setLista(resposta.data);\r\n            setLoad(false);\r\n\r\n        } catch (e) {\r\n            Alert.alert(e.toString());\r\n        }\r\n    }\r\n\r\n\r\n    useEffect(\r\n        () => {\r\n            console.log('executando useffect da listagem');\r\n            carregaLista(); //necessário método pois aqui não pode utilizar await...\r\n        }, []);\r\n\r\n\r\n    function novoRegistro() {\r\n        navigation.navigate('CadastroPessoa', {\r\n            inclusao: true,\r\n        });\r\n    }\r\n\r\n\r\n    function editaRegistro(pessoa) {\r\n        navigation.navigate('CadastroPessoa', {\r\n            pessoa, inclusao: false\r\n        });\r\n    }\r\n\r\n\r\n    function removerElemento(id) {\r\n        Alert.alert('Atenção', 'Confirma a remoção do contato?',\r\n            [\r\n                {\r\n                    text: 'Sim',\r\n                    onPress: () => efetivaRemocao(id),\r\n                },\r\n                {\r\n                    text: 'Não',\r\n                    style: 'cancel',\r\n                }\r\n            ]);\r\n    }\r\n\r\n    async function efetivaRemocao(id) {\r\n        try {\r\n            api.delete('/Pessoa/' + id).\r\n                then(() => { carregaLista() });\r\n\r\n        } catch (e) {\r\n            Alert.alert(e.toString());\r\n        }\r\n    }\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <Header metodoAdd={novoRegistro} exibeIconeNovoRegistro={true} novoRegistro={true} />\r\n            <ScrollView style={styles.areaScroolView}>\r\n                {\r\n                    load\r\n                        ?\r\n                        <ActivityIndicator size=\"large\" color=\"#00ff00\" style={styles.waiting} />\r\n                        :\r\n                        lista.map((pessoa, index) => (\r\n                            <CardPessoa key={index.toString()} pessoa={pessoa} editar={editaRegistro} remover={removerElemento} />\r\n                        )\r\n                        )\r\n                }\r\n            </ScrollView >\r\n        </View>\r\n    );\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}